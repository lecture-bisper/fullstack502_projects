<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Color & Size 추가</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/pretendard.css">
  <link th:href="@{/css/style.css}" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
  <script src="/js/script.js"></script>

  <script>
    $(document).ready(function () {
      $('.color_add.color').on('keypress', function (e) {
        if (e.which === 13) { // 13 = 엔터 키
          e.preventDefault(); // 폼 제출 막기
          $('.cs_input_add.color button').click(); // 버튼 클릭 효과 주기
        }
      });
      $('.size_add.size').on('keypress', function (e) {
        if (e.which === 13) { // 13 = 엔터 키
          e.preventDefault(); // 폼 제출 막기
          $('.cs_input_add.size button').click(); // 버튼 클릭 효과 주기
        }
      });

      // "추가" 버튼 클릭 이벤트
      $('.cs_input_add.color button').on('click', function () {
        const colorVal = $('.color_add').val().trim();

        if (colorVal === '') {
          alert('색상을 입력해주세요!');
          return;
        }

        const newColor = `
          <div class="contents">
            <input type="text" name="colorList[]" value="${colorVal}" class="cs_input color_display" readonly>
            <div class="cs_delete_btn">
              <span></span>
              <span></span>
            </div>
          </div>
        `;

        // .cs_input_display 안에 추가
        $('.cs_input_display.color').append(newColor);
        $('.color_add').val(''); // 입력창 초기화

        // 삭제 버튼 이벤트: 새로 추가된 거에만 적용
        $('.cs_input_display .cs_delete_btn').last().on('click', function () {
          $(this).closest('.contents').remove();
        });
      });


      $('.cs_input_add.size button').on('click', function () {
        const sizeVal = $('.size_add').val().trim();

        if (sizeVal === '') {
          alert('색상을 입력해주세요!');
          return;
        }

        const newSize = `
          <div class="contents">
            <input type="text" name="sizeList[]" value="${sizeVal}" class="cs_input size_display" readonly>
            <div class="cs_delete_btn">
              <span></span>
              <span></span>
            </div>
          </div>
        `;

        // .cs_input_display 안에 추가
        $('.cs_input_display.size').append(newSize);
        $('.size_add').val(''); // 입력창 초기화

        // 삭제 버튼 이벤트: 새로 추가된 거에만 적용
        $('.cs_input_display .cs_delete_btn').last().on('click', function () {
          $(this).closest('.contents').remove();
        });
      });
    });
  </script>
</head>
<body class="pretendard">

<div th:replace="layout/header :: header"></div>

  <div class="back_bg"></div>
  <form action="addColorSize" method="post">
    <div class="cs_box">
      <div class="left">
        <div class="box_bg"></div>
        <div class="cs_fixed_box">
          <h2 class="my_title">Color Add</h2>
          <div class="cs_input_add color">
            <input type="text" name="color" class="color_add color" placeholder="Color">
            <button type="button">추가</button>
          </div>
          <p>[ 영어로 등록해주세요 ]</p>
        </div>
        <div class="cs_inner">
          <div class="cs_input_display color">
          </div>
        </div>
      </div>
      <div class="right">
        <div class="box_bg"></div>
        <div class="cs_fixed_box">
          <h2 class="my_title">Size Add</h2>
          <div class="cs_input_add size">
            <input type="text" name="size" class="size_add size" placeholder="Size">
            <button type="button">추가</button>
          </div>
          <p>[ 영어로 등록해주세요 ]</p>
        </div>
        <div class="cs_inner">
          <div class="cs_input_display size">
          </div>
        </div>
      </div>
    </div>
    <div class="cs_bot_box">
      <div class="box_bg"></div>
      <button type="submit" class="cs_submit_btn">저장하기</button>
<!--  저장하기 누르면 admin 페이지로 redirect -->
    </div>
  </form>

<div th:replace="layout/footer :: footer"></div>

</body>
</html>
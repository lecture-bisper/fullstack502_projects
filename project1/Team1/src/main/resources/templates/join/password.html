<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>비밀번호 찾기</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/pretendard.css">
  <link th:href="@{/css/style.css}" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
  <script src="/js/script.js"></script>

  <script>
    $(document).ready(function() {

      $('.co_info').hide();
      $('.inc_info').hide();

      $('form').on('submit', function (e) {
        e.preventDefault();

        const inputId = $('input[name="id"]').val();
        const inputEmail = $('input[name="email"]').val();

        $.ajax({
          url: '/findPassword',
          method: 'POST',
          data: { customerId: inputId, customerEmail: inputEmail }, // 여기 데이터 넣어야행(id, email 부분)
          success: function (res) {
            if (res.success) {
              $('.inc_info').hide();
              $('.co_info').html(
                  `[${res.name}] 님의 비밀번호는<br><span>${res.password}</span> 입니다.` // 여기도 데이터 넣어야행
              ).show();
            } else {
              $('.co_info').hide();
              $('.inc_info').show();
            }
          },
          error: function (xhr,status,) {
            $('.co_info').hide();
            $('.inc_info').show();
          }
        });
      });
    });
  </script>
</head>
<body class="pretendard">

<div th:replace="layout/header :: header"></div>

  <div class="center_box color_white">
    <h2 class="login_title">Find Password</h2>
    <form action="/findPassword" method="post">
      <div class="input_box">
        <p>ID</p>
        <input type="text" name="id" value="" placeholder="Your ID">
      </div>
      <div class="input_box">
        <p>Email</p>
        <input type="email" name="email" value="" placeholder="Your Email">
      </div>
      <div class="pw_find">
        <p class="inc_info">정보가 일치하지 않습니다.</p>
        <p class="co_info">
          [홍길동] 님의 비밀번호는<br>
          <span>12345678</span> 입니다.
        </p>
      </div>
      <div class="bot_box center">
        <button type="submit" class="s_btn">찾기</button>
      </div>
    </form>
  </div>

  <div th:replace="layout/footer :: footer"></div>

</body>
</html>